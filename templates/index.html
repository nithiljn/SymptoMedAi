{% extends "base.html" %}

{% block title %}Health Care Center{% endblock %}

{% block head %}
<style>
  body {
    background-color: #ffffff;
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
  }
  h1 {
    color: #3529a1;
    font-size: 2.5rem;
    font-weight: 700;
    text-align: center;
    margin: 2rem 0;
    text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
    display: flex;
    align-items: center;
    justify-content: center;
  }
  h1 img {
    height: 50px;
    vertical-align: middle;
    margin-right: 10px;
  }
  .background-header {
    width: 100vw;
    height: 900px;
    position: absolute;
    top: 0;
    left: 0;
    z-index: -1;
    margin: 0;
    padding: 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    overflow: hidden; /* Ensure video doesn't overflow */
  }
  .background-header video {
    width: 100%;
    height: 100%;
    object-fit: cover; /* Ensures video covers the area like a background image */
    position: absolute;
    top: 0;
    left: 0;
    z-index: -1;
  }
  .background-header.fade {
    opacity: 0;
    transition: opacity 1s ease-in-out;
  }
  .welcome-text {
    position: absolute;
    top: 50%;
    left: 5%;
    transform: translateY(-50%);
    text-align: left;
    color: #333333;
    max-width: 400px;
    padding: 0.5rem;
  }
  .welcome-text h2 {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    overflow: hidden;
    white-space: nowrap;
  }
  .welcome-text p {
    font-size: 1.2rem;
    color: #FFD700;
    text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
    overflow: hidden;
    white-space: nowrap;
  }
  .letter {
    display: inline-block;
    opacity: 0;
    transform: translateX(-50px);
    animation: slideIn 0.5s ease forwards;
  }
  .letter.stopped {
    animation: none;
    opacity: 1;
    transform: translateX(0);
  }
  @keyframes slideIn {
    0% { opacity: 0; transform: translateX(-50px); }
    100% { opacity: 1; transform: translateX(0); }
  }
  .search-container {
    position: absolute;
    top: 50%;
    right: 5%;
    transform: translateY(-50%);
    perspective: 1000px;
    padding: 0.5rem;
  }
  .search-bar {
    background: rgba(255, 255, 255, 0.9);
    border: 2px solid #3529a1;
    border-radius: 25px;
    padding: 10px 15px;
    width: 300px;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
    transform: rotateY(20deg) translateZ(20px);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    font-size: 1rem;
    outline: none;
  }
  .search-bar:focus {
    transform: rotateY(0deg) translateZ(30px);
    box-shadow: 0 15px 30px rgba(53, 41, 161, 0.5);
    border-color: #2a5298;
  }
  .search-bar::placeholder {
    color: #888;
  }
  .scroll-arrow {
    position: absolute;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 2rem;
    color: #FF69B4;
    animation: glowScroll 2s infinite ease-in-out;
  }
  @keyframes glowScroll {
    0% { transform: translateX(-50%) scale(1); text-shadow: 0 0 5px #FF69B4, 0 0 10px #FF69B4; }
    50% { transform: translateX(-50%) scale(1.2) translateY(-10px); text-shadow: 0 0 10px #FF69B4, 0 0 20px #FF69B4, 0 0 30px #FF69B4; }
    100% { transform: translateX(-50%) scale(1); text-shadow: 0 0 5px #FF69B4, 0 0 10px #FF69B4; }
  }
  .content-container {
    position: relative;
    z-index: 1;
    padding: 1rem;
    padding-top: 510px;
  }
  .health-analysis-container {
    background: #fff;
    border-radius: 10px;
    padding: 1.5rem;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    max-width: 800px;
    margin: 1.5rem auto;
    position: relative;
    z-index: 1;
  }
  .health-analysis-container h2 {
    color: #3529a1;
    font-size: 1.8rem;
    font-weight: 600;
    margin-bottom: 1rem;
    text-align: center;
  }
  .input-group {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    margin-bottom: 0.75rem;
  }
  .input-field {
    flex: 1 1 45%;
    display: flex;
    flex-direction: column;
  }
  .input-field label {
    font-weight: 500;
    color: #333;
    margin-bottom: 0.5rem;
  }
  .input-field input {
    padding: 6px;
    border: 1px solid #ccc;
    border-radius: 5px;
    font-size: 1rem;
  }
  .bar-graph {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    margin-top: 1.5rem;
    perspective: 1000px;
    opacity: 0;
    animation: fadeIn 0.5s ease forwards;
  }
  @keyframes fadeIn {
    0% { opacity: 0; transform: translateY(20px); }
    100% { opacity: 1; transform: translateY(0); }
  }
  .bar-container {
    flex: 1 1 45%;
    min-width: 200px;
    position: relative;
    transform-style: preserve-3d;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  }
  .bar-label {
    font-weight: 600;
    color: #2a5298;
    font-size: 1rem;
    text-align: center;
    margin-bottom: 10px;
  }
  .bar-3d-wrapper {
    position: relative;
    width: 100%;
    height: 100px;
    transform-style: preserve-3d;
    perspective: 800px;
  }
  .bar-3d {
    position: absolute;
    bottom: 0;
    width: 100%;
    background: linear-gradient(135deg, #3529a1, #2a5298);
    border-radius: 5px 5px 0 0;
    transform-origin: bottom;
    transform: translateZ(0px) scaleY(0);
    animation: rise 1s ease-out forwards;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    box-shadow: 0 0 10px rgba(53, 41, 161, 0.5);
  }
  .bar-3d:hover {
    transform: translateZ(20px) scaleY(1.05);
    box-shadow: 0 10px 20px rgba(53, 41, 161, 0.7);
  }
  .bar-3d.normal {
    background: linear-gradient(135deg, #28a745, #218838);
  }
  .bar-3d.normal:hover {
    box-shadow: 0 10px 20px rgba(40, 167, 69, 0.7);
  }
  .bar-3d.slightly-abnormal {
    background: linear-gradient(135deg, #ffc107, #e0a800);
  }
  .bar-3d.slightly-abnormal:hover {
    box-shadow: 0 10px 20px rgba(255, 193, 7, 0.7);
  }
  .bar-3d.critical {
    background: linear-gradient(135deg, #dc3545, #c82333);
  }
  .bar-3d.critical:hover {
    box-shadow: 0 10px 20px rgba(220, 53, 69, 0.7);
  }
  .bar-3d span {
    position: absolute;
    top: 5px;
    left: 50%;
    transform: translateX(-50%);
    color: #fff;
    font-size: 0.9rem;
    font-weight: 500;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    white-space: nowrap;
  }
  @keyframes rise {
    0% { transform: translateZ(0px) scaleY(0); }
    100% { transform: translateZ(10px) scaleY(1); }
  }
  .suggestions {
    margin-top: 1rem;
    padding: 1rem;
    background: #e9f7ff;
    border-radius: 8px;
    color: #333;
    border-left: 4px solid #2a5298;
    animation: fadeIn 0.5s ease forwards;
  }
  .suggestions h3 {
    color: #3529a1;
    font-size: 1.2rem;
    margin-bottom: 0.75rem;
  }
  .form-container {
    background: #fff;
    border-radius: 10px;
    padding: 1.5rem;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    max-width: 600px;
    margin: 0 auto;
    position: relative;
    z-index: 1;
  }
  .form-container label {
    font-weight: 500;
    color: #333;
  }
  .btn-danger {
    background: #dc3545;
    border: none;
    border-radius: 5px;
    padding: 8px 16px;
    width: auto;
    font-weight: 600;
    font-size: 0.9rem;
    transition: background-color 0.3s ease;
  }
  .btn-danger:hover {
    background: #c82333;
  }
  .btn-warning {
    background: #ff8c00;
    border: none;
    border-radius: 5px;
    padding: 8px 16px;
    width: auto;
    font-weight: 600;
    font-size: 0.9rem;
    transition: background-color 0.3s ease;
    color: #fff;
  }
  .btn-warning:hover {
    background: #ffae42;
  }
  .cube-container {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.8);
    z-index: 1000;
    justify-content: center;
    align-items: center;
    perspective: 1000px;
  }
  .cube {
    width: 80px;
    height: 80px;
    position: relative;
    transform-style: preserve-3d;
    animation: spinCube 2s infinite ease-in-out;
  }
  @keyframes spinCube {
    0% { transform: rotateX(0deg) rotateY(0deg); }
    50% { transform: rotateX(180deg) rotateY(180deg); }
    100% { transform: rotateX(360deg) rotateY(360deg); }
  }
  .cube-face {
    position: absolute;
    width: 80px;
    height: 80px;
    background: #3529a1;
    border: 2px solid #FFD700;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2rem;
    color: #fff;
    font-weight: 700;
    text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
  }
  .cube-face.front  { transform: translateZ(40px); }
  .cube-face.back   { transform: rotateY(180deg) translateZ(40px); }
  .cube-face.right  { transform: rotateY(90deg) translateZ(40px); }
  .cube-face.left   { transform: rotateY(-90deg) translateZ(40px); }
  .cube-face.top    { transform: rotateX(90deg) translateZ(40px); }
  .cube-face.bottom { transform: rotateX(-90deg) translateZ(40px); }
  .result-boxes {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    margin-top: 1rem;
    justify-content: center;
  }
  .result-box {
    background: linear-gradient(135deg, #f0f7ff 0%, #fff 100%);
    border-radius: 10px;
    padding: 1rem;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    flex: 1 1 300px;
    max-width: 400px;
    border-left: 5px solid #003087;
    animation: slideInFromLeft 1s ease-out forwards;
    display: flex;
    flex-direction: column;
  }
  .disease-background {
    background: linear-gradient(135deg, rgba(240, 247, 255, 0.8) 0%, rgba(255, 255, 255, 0.8) 100%), url("{{ url_for('static', filename='y1.jpg') }}") no-repeat center center;
    background-size: cover;
    position: relative;
    overflow: hidden;
    border-radius: 10px;
    padding: 1rem;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    flex: 1 1 300px;
    max-width: 400px;
    border-left: 5px solid #003087;
    animation: slideInFromLeft 1s ease-out forwards;
    display: flex;
    flex-direction: column;
  }
  .description-background {
    background: linear-gradient(135deg, rgba(240, 247, 255, 0.8) 0%, rgba(255, 255, 255, 0.8) 100%), url("{{ url_for('static', filename='y2.jpg') }}") no-repeat center center;
    background-size: cover;
    position: relative;
    overflow: hidden;
    border-radius: 10px;
    padding: 1rem;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    flex: 1 1 300px;
    max-width: 400px;
    border-left: 5px solid #003087;
    animation: slideInFromLeft 1s ease-out forwards;
    display: flex;
    flex-direction: column;
  }
  .precautions-background {
    background: linear-gradient(135deg, rgba(240, 247, 255, 0.8) 0%, rgba(255, 255, 255, 0.8) 100%), url("{{ url_for('static', filename='y4.jpg') }}") no-repeat center center;
    background-size: cover;
    position: relative;
    overflow: hidden;
    border-radius: 10px;
    padding: 1rem;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    flex: 1 1 300px;
    max-width: 400px;
    border-left: 5px solid #003087;
    animation: slideInFromLeft 1s ease-out forwards;
    display: flex;
    flex-direction: column;
  }
  .diets-background {
    background: linear-gradient(135deg, rgba(240, 247, 255, 0.8) 0%, rgba(255, 255, 255, 0.8) 100%), url("{{ url_for('static', filename='y6.jpg') }}") no-repeat center center;
    background-size: cover;
    position: relative;
    overflow: hidden;
    border-radius: 10px;
    padding: 1rem;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    flex: 1 1 300px;
    max-width: 400px;
    border-left: 5px solid #003087;
    animation: slideInFromLeft 1s ease-out forwards;
    display: flex;
    flex-direction: column;
  }
  .medications-background {
    background: linear-gradient(135deg, rgba(240, 247, 255, 0.8) 0%, rgba(255, 255, 255, 0.8) 100%), url("{{ url_for('static', filename='y3.jpg') }}") no-repeat center center;
    background-size: cover;
    position: relative;
    overflow: hidden;
    border-radius: 10px;
    padding: 1rem;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    flex: 1 1 300px;
    max-width: 400px;
    border-left: 5px solid #003087;
    animation: slideInFromLeft 1s ease-out forwards;
    display: flex;
    flex-direction: column;
  }
  .workouts-background {
    background: linear-gradient(135deg, rgba(240, 247,255, 0.8) 0%, rgba(255, 255, 255, 0.8) 100%), url("{{ url_for('static', filename='y5.jpg') }}") no-repeat center center;
    background-size: cover;
    position: relative;
    overflow: hidden;
    border-radius: 10px;
    padding: 1rem;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    flex: 1 1 300px;
    max-width: 400px;
    border-left: 5px solid #003087;
    animation: slideInFromLeft 1s ease-out forwards;
    display: flex;
    flex-direction: column;
  }
  .disease-background h3, .description-background h3, .precautions-background h3, .diets-background h3, .medications-background h3, .workouts-background h3 {
    color: #003087;
    font-size: 1.5rem;
    font-weight: 600;
    border-bottom: 2px solid #268AF3;
    padding-bottom: 5px;
    margin-bottom: 0.75rem;
    position: relative;
    z-index: 1;
  }
  .disease-background p, .description-background p, .precautions-background ul, .diets-background ul, .medications-background ul, .workouts-background ul {
    color: #333;
    margin: 8px 0;
    flex-grow: 1;
    position: relative;
    z-index: 1;
  }
  .disease-background strong, .description-background strong, .precautions-background strong, .diets-background strong, .medications-background strong, .workouts-background strong {
    color: #F39334;
    font-weight: 600;
  }
  .precautions-background ul, .diets-background ul, .medications-background ul, .workouts-background ul {
    list-style-type: none;
    padding-left: 15px;
  }
  .precautions-background ul li, .diets-background ul li, .medications-background ul li, .workouts-background ul li {
    position: relative;
    margin: 6px 0;
    color: #268AF3;
  }
  .precautions-background ul li:before, .diets-background ul li:before, .medications-background ul li:before, .workouts-background ul li:before {
    content: "•";
    color: #F8576F;
    position: absolute;
    left: -12px;
    font-size: 1.2em;
  }
  @keyframes slideInFromLeft {
    0% { opacity: 0; transform: translateX(-50px); }
    100% { opacity: 1; transform: translateX(0); }
  }
  .result-box h3 {
    color: #003087;
    font-size: 1.5rem;
    font-weight: 600;
    border-bottom: 2px solid #268AF3;
    padding-bottom: 5px;
    margin-bottom: 0.75rem;
  }
  .result-box p, .result-box ul {
    color: #333;
    margin: 8px 0;
    flex-grow: 1;
  }
  .result-box strong {
    color: #F39334;
    font-weight: 600;
  }
  .result-box ul {
    list-style-type: none;
    padding-left: 15px;
  }
  .result-box ul li {
    position: relative;
    margin: 6px 0;
    color: #268AF3;
  }
  .result-box ul li:before {
    content: "•";
    color: #F8576F;
    position: absolute;
    left: -12px;
    font-size: 1.2em;
  }
  .result-box .doctor-table {
    width: 100%;
    border-collapse: collapse;
    background: #fff;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    border-radius: 5px;
    overflow: hidden;
    font-size: 0.9rem;
  }
  .result-box .doctor-table th, 
  .result-box .doctor-table td {
    padding: 8px;
    text-align: left;
    border-bottom: 1px solid #ddd;
  }
  .result-box .doctor-table th {
    background: #3529a1;
    color: #fff;
    font-weight: 600;
  }
  .result-box .doctor-table tr:nth-child(even) {
    background: #f8f9fa;
  }
  .result-box .doctor-table tr:hover {
    background: #e9f7ff;
  }
  .result-box .doctor-buttons {
    margin-top: 0.5rem;
    display: flex;
    gap: 0.5rem;
    justify-content: center;
  }
  .result-box .btn {
    padding: 6px 12px;
    font-size: 0.9rem;
  }
  .disease-list {
    background: #f9f9f9;
    border-radius: 10px;
    padding: 1rem;
    margin-top: 1rem;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.03);
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
    border-left: 4px solid #3529a1;
  }
  .disease-list h3 {
    color: #003087;
    font-size: 1.4rem;
    font-weight: 600;
    margin-bottom: 0.75rem;
  }
  .disease-list ul {
    list-style-type: none;
    padding-left: 0;
    column-count: 2;
    font-size: 0.95rem;
    color: #555;
  }
  .disease-list ul li {
    margin-bottom: 0.5rem;
    transition: color 0.3s ease;
  }
  .disease-list ul li:hover {
    color: #3529a1;
  }
  .symptom-checkboxes {
    max-height: 300px;
    overflow-y: auto;
    column-count: 2;
    column-gap: 20px;
    margin-top: 8px;
  }
  .symptom-checkboxes label {
    display: block;
    margin-bottom: 8px;
    color: #333;
  }
  .symptom-checkboxes input[type="checkbox"] {
    margin-right: 8px;
  }
  .button-group {
    display: flex;
    gap: 8px;
  }
  .footer {
    background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
    color: #fff;
    padding: 1.5rem 5%;
    display: flex;
    justify-content: space-between;
    flex-wrap: wrap;
    font-family: Arial, sans-serif;
    position: relative;
    transform-style: preserve-3d;
    perspective: 1000px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
  }
  .footer-column {
    flex: 1;
    min-width: 200px;
    margin: 0.75rem 0;
    transform: translateZ(20px);
    transition: transform 0.3s ease;
  }
  .footer-column:hover {
    transform: translateZ(40px) scale(1.05);
  }
  .footer-column h4 {
    font-size: 1.2rem;
    margin-bottom: 0.75rem;
    text-transform: uppercase;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
  }
  .footer-column ul {
    list-style: none;
    padding: 0;
  }
  .footer-column ul li {
    margin-bottom: 0.4rem;
    transform: translateZ(10px);
  }
  .footer-column ul li a {
    color: #fff;
    text-decoration: none;
    font-size: 0.9rem;
    transition: color 0.3s ease;
  }
  .footer-column ul li a:hover {
    color: #ffd700;
    text-decoration: underline;
  }
  .footer-column .btn {
    background: #ffd700;
    color: #1e3c72;
    border: none;
    padding: 0.4rem 0.8rem;
    border-radius: 25px;
    font-size: 0.9rem;
    cursor: pointer;
    margin-top: 0.4rem;
    transform: translateZ(30px);
    transition: transform 0.3s ease, background 0.3s ease;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
  }
  .footer-column .btn:hover {
    background: #ffeb3b;
    transform: translateZ(40px) rotateX(10deg);
  }
  .footer-logo {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-top: 1.5rem;
    width: 100%;
    transform: translateZ(30px);
    animation: float 4s ease-in-out infinite;
  }
  .footer-logo img {
    height: 60px;
    margin-right: 0.75rem;
    transform: rotateY(360deg);
    animation: spin 10s linear infinite;
  }
  .footer-logo span {
    font-size: 1.5rem;
    font-weight: 700;
    text-transform: uppercase;
    text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.4);
  }
  .social-icons {
    margin-left: 0.75rem;
    display: flex;
    gap: 12px;
  }
  .social-icons a {
    color: #fff;
    font-size: 1.5rem;
    transition: transform 0.3s ease, color 0.3s ease;
    transform: translateZ(20px);
  }
  .social-icons a:hover {
    color: #ffd700;
    transform: translateZ(40px) scale(1.2);
  }
  @keyframes float {
    0% { transform: translateZ(30px) translateY(0); }
    50% { transform: translateZ(30px) translateY(-15px); }
    100% { transform: translateZ(30px) translateY(0); }
  }
  @keyframes spin {
    from { transform: rotateY(0deg); }
    to { transform: rotateY(360deg); }
  }
  .doctor-list, .doctor-table {
    margin-top: 2rem;
    width: 100%;
    max-width: 1000px;
    margin-left: auto;
    margin-right: auto;
  }
  .doctor-list h3 {
    color: #3529a1;
    font-size: 1.8rem;
    font-weight: 600;
    margin-bottom: 1rem;
    text-align: center;
  }
  .doctor-table {
    width: 100%;
    border-collapse: collapse;
    background: #fff;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    border-radius: 10px;
    overflow: hidden;
  }
  .doctor-table th, .doctor-table td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid #ddd;
  }
  .doctor-table th {
    background: #3529a1;
    color: #fff;
    font-weight: 600;
  }
  .doctor-table tr:nth-child(even) {
    background: #f8f9fa;
  }
  .doctor-table tr:hover {
    background: #e9f7ff;
  }
  .doctor-table .btn-warning {
    padding: 6px 12px;
    font-size: 0.9rem;
    background: #28a745;
    color: #fff;
  }
  .doctor-table .btn-warning:hover {
    background: #218838;
  }
  .doctor-buttons {
    display: flex;
    justify-content: center;
    gap: 0.75rem;
    margin-top: 1rem;
  }
  /* Chatbot Button and Popup Styles */
  .chatbot-button {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: #3529a1;
    color: #fff;
    border: none;
    border-radius: 50%;
    width: 60px;
    height: 60px;
    font-size: 1.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    cursor: pointer;
    transition: transform 0.3s ease, background 0.3s ease;
    z-index: 1000;
  }
  .chatbot-button:hover {
    background: #2a5298;
    transform: scale(1.1);
  }
  .chatbot-popup {
    position: fixed;
    bottom: 90px;
    right: 20px;
    background: #fff;
    border-radius: 10px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    width: 300px;
    max-height: 400px;
    overflow: hidden;
    display: none;
    z-index: 1000;
    animation: slideUp 0.3s ease forwards;
  }
  .chatbot-header {
    background: #3529a1;
    color: #fff;
    padding: 10px;
    font-size: 1.2rem;
    font-weight: 600;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  .chatbot-body {
    padding: 15px;
    text-align: center;
  }
  .chatbot-body p {
    color: #333;
    margin-bottom: 15px;
  }
  .chatbot-body a {
    display: inline-block;
    background: #ffd700;
    color: #1e3c72;
    padding: 8px 16px;
    border-radius: 20px;
    text-decoration: none;
    font-weight: 600;
    transition: background 0.3s ease;
  }
  .chatbot-body a:hover {
    background: #ffeb3b;
  }
  .chatbot-close {
    background: none;
    border: none;
    color: #fff;
    font-size: 1.2rem;
    cursor: pointer;
  }
  @keyframes slideUp {
    0% { transform: translateY(20px); opacity: 0; }
    100% { transform: translateY(0); opacity: 1; }
  }
</style>
{% endblock %}

{% block content %}
<div class="cube-container" id="cubeContainer">
  <div class="cube">
    <div class="cube-face front">SM</div>
    <div class="cube-face back">SM</div>
    <div class="cube-face right">SM</div>
    <div class="cube-face left">SM</div>
    <div class="cube-face top">SM</div>
    <div class="cube-face bottom">SM</div>
  </div>
</div>

<div class="background-header">
  <video autoplay muted loop playsinline>
    <source src="{{ url_for('static', filename='mp3.mp4') }}" type="video/mp4">
    Your browser does not support the video tag.
  </video>
  <div class="welcome-text">
    <h2>
      <span class="letter" style="animation-delay: 0.1s;">W</span>
      <span class="letter" style="animation-delay: 0.15s;">e</span>
      <span class="letter" style="animation-delay: 0.2s;">l</span>
      <span class="letter" style="animation-delay: 0.25s;">c</span>
      <span class="letter" style="animation-delay: 0.3s;">o</span>
      <span class="letter" style="animation-delay: 0.35s;">m</span>
      <span class="letter" style="animation-delay: 0.4s;">e</span>
      <span class="letter" style="animation-delay: 0.45s;"> </span>
      <span class="letter" style="animation-delay: 0.5s;">t</span>
      <span class="letter" style="animation-delay: 0.55s;">o</span>
      <span class="letter" style="animation-delay: 0.6s;"> </span>
      <br>
      <span class="letter" style="animation-delay: 0.65s;">S</span>
      <span class="letter" style="animation-delay: 0.7s;">y</span>
      <span class="letter" style="animation-delay: 0.75s;">m</span>
      <span class="letter" style="animation-delay: 0.8s;">p</span>
      <span class="letter" style="animation-delay: 0.85s;">t</span>
      <span class="letter" style="animation-delay: 0.9s;">o</span>
      <span class="letter" style="animation-delay: 0.95s;">M</span>
      <span class="letter" style="animation-delay: 1s;">e</span>
      <span class="letter" style="animation-delay: 1.05s;">d</span>
      <span class="letter" style="animation-delay: 1.15s;">A</span>
      <span class="letter" style="animation-delay: 1.2s;">I</span>
    </h2>
    <p>
      <span class="letter" style="animation-delay: 1.3s;">W</span>
      <span class="letter" style="animation-delay: 1.35s;">e</span>
      <span class="letter" style="animation-delay: 1.4s;"> </span>
      <span class="letter" style="animation-delay: 1.45s;">a</span>
      <span class="letter" style="animation-delay: 1.5s;">r</span>
      <span class="letter" style="animation-delay: 1.55s;">e</span>
      <span class="letter" style="animation-delay: 1.6s;"> </span>
      <span class="letter" style="animation-delay: 1.65s;">a</span>
      <span class="letter" style="animation-delay: 1.7s;">n</span>
      <span class="letter" style="animation-delay: 1.75s;"> </span>
      <span class="letter" style="animation-delay: 1.8s;">A</span>
      <span class="letter" style="animation-delay: 1.85s;">I</span>
      <span class="letter" style="animation-delay: 1.9s;">-</span>
      <span class="letter" style="animation-delay: 1.95s;">p</span>
      <span class="letter" style="animation-delay: 2s;">o</span>
      <span class="letter" style="animation-delay: 2.05s;">w</span>
      <span class="letter" style="animation-delay: 2.1s;">e</span>
      <span class="letter" style="animation-delay: 2.15s;">r</span>
      <span class="letter" style="animation-delay: 2.2s;">e</span>
      <span class="letter" style="animation-delay: 2.25s;">d</span>
      <span class="letter" style="animation-delay: 2.3s;"> </span>
      <span class="letter" style="animation-delay: 2.35s;">d</span>
      <span class="letter" style="animation-delay: 2.4s;">i</span>
      <span class="letter" style="animation-delay: 2.45s;">s</span>
      <span class="letter" style="animation-delay: 2.5s;">e</span>
      <span class="letter" style="animation-delay: 2.55s;">a</span>
      <span class="letter" style="animation-delay: 2.6s;">s</span>
      <span class="letter" style="animation-delay: 2.65s;">e</span>
      <br>
      <span class="letter" style="animation-delay: 2.7s;"> </span>
      <span class="letter" style="animation-delay: 2.75s;">p</span>
      <span class="letter" style="animation-delay: 2.8s;">r</span>
      <span class="letter" style="animation-delay: 2.85s;">e</span>
      <span class="letter" style="animation-delay: 2.9s;">d</span>
      <span class="letter" style="animation-delay: 2.95s;">i</span>
      <span class="letter" style="animation-delay: 3s;">c</span>
      <span class="letter" style="animation-delay: 3.05s;">t</span>
      <span class="letter" style="animation-delay: 3.1s;">i</span>
      <span class="letter" style="animation-delay: 3.15s;">o</span>
      <span class="letter" style="animation-delay: 3.2s;">n</span>
      <span class="letter" style="animation-delay: 3.25s;"> </span>
      <span class="letter" style="animation-delay: 3.3s;">s</span>
      <span class="letter" style="animation-delay: 3.35s;">y</span>
      <span class="letter" style="animation-delay: 3.4s;">s</span>
      <span class="letter" style="animation-delay: 3.45s;">t</span>
      <span class="letter" style="animation-delay: 3.5s;">e</span>
      <span class="letter" style="animation-delay: 3.55s;">m</span>
      <span class="letter" style="animation-delay: 3.6s;">,</span>
      <span class="letter" style="animation-delay: 3.65s;"> </span>
      <span class="letter" style="animation-delay: 3.7s;">r</span>
      <span class="letter" style="animation-delay: 3.75s;">e</span>
      <span class="letter" style="animation-delay: 3.8s;">a</span>
      <span class="letter" style="animation-delay: 3.85s;">d</span>
      <span class="letter" style="animation-delay: 3.9s;">y</span>
      <span class="letter" style="animation-delay: 3.95s;"> </span>
      <span class="letter" style="animation-delay: 4s;">t</span>
      <span class="letter" style="animation-delay: 4.05s;">o</span>
      <br>
      <span class="letter" style="animation-delay: 4.1s;"> </span>
      <span class="letter" style="animation-delay: 4.15s;">a</span>
      <span class="letter" style="animation-delay: 4.2s;">s</span>
      <span class="letter" style="animation-delay: 4.25s;">s</span>
      <span class="letter" style="animation-delay: 4.3s;">i</span>
      <span class="letter" style="animation-delay: 4.35s;">s</span>
      <span class="letter" style="animation-delay: 4.4s;">t</span>
      <span class="letter" style="animation-delay: 4.45s;"> </span>
      <span class="letter" style="animation-delay: 4.5s;">y</span>
      <span class="letter" style="animation-delay: 4.55s;">o</span>
      <span class="letter" style="animation-delay: 4.6s;">u</span>
      <span class="letter" style="animation-delay: 4.65s;">.</span>
    </p>
  </div>
  <!-- <div class="search-container">
    <input type="text" class="search-bar" placeholder="Search symptoms or diseases...">
  </div> -->
  <div class="scroll-arrow">
    <i class="bi bi-arrow-down"></i>
  </div>
</div>

<div class="content-container">
  <div class="health-analysis-container" id="healthAnalysisContainer">
    <h2>Health Parameter Analysis</h2>
    <form id="healthForm">
      <div class="input-group">
        <div class="input-field">
          <label>Age (years)</label>
          <input type="number" name="age" placeholder="e.g., 35" required min="0" max="120">
        </div>
        <div class="input-field">
          <label>Body Temperature (°F)</label>
          <input type="number" step="0.1" name="body_temp" placeholder="e.g., 98.6">
        </div>
        <div class="input-field">
          <label>Heart Rate (bpm)</label>
          <input type="number" name="heart_rate" placeholder="e.g., 75">
        </div>
        <div class="input-field">
          <label>Respiratory Rate (breaths/min)</label>
          <input type="number" name="resp_rate" placeholder="e.g., 16">
        </div>
        <div class="input-field">
          <label>Blood Pressure (Systolic/Diastolic mmHg)</label>
          <input type="text" name="blood_pressure" placeholder="e.g., 120/80">
        </div>
        <div class="input-field">
          <label>Oxygen Saturation (%)</label>
          <input type="number" name="spo2" placeholder="e.g., 98">
        </div>
        <div class="input-field">
          <label>Hemoglobin (g/dL)</label>
          <input type="number" step="0.1" name="hemoglobin" placeholder="e.g., 14.5">
        </div>
        <div class="input-field">
          <label>White Blood Cells (cells/µL)</label>
          <input type="number" name="wbc" placeholder="e.g., 7000">
        </div>
        <div class="input-field">
          <label>Red Blood Cells (million cells/µL)</label>
          <input type="number" step="0.1" name="rbc" placeholder="e.g., 5.0">
        </div>
        <div class="input-field">
          <label>Platelet Count (per µL)</label>
          <input type="number" name="platelets" placeholder="e.g., 300000">
        </div>
        <div class="input-field">
          <label>Blood Sugar (Fasting, mg/dL)</label>
          <input type="number" name="blood_sugar_fasting" placeholder="e.g., 85">
        </div>
        <div class="input-field">
          <label>Blood Sugar (Post-meal, mg/dL)</label>
          <input type="number" name="blood_sugar_post" placeholder="e.g., 130">
        </div>
        <div class="input-field">
          <label>Cholesterol (Total, mg/dL)</label>
          <input type="number" name="cholesterol" placeholder="e.g., 180">
        </div>
        <div class="input-field">
          <label>Triglycerides (mg/dL)</label>
          <input type="number" name="triglycerides" placeholder="e.g., 120">
        </div>
        <div class="input-field">
          <label>Uric Acid (mg/dL)</label>
          <input type="number" step="0.1" name="uric_acid" placeholder="e.g., 5.5">
        </div>
        <div class="input-field">
          <label>Liver Enzymes (ALT, U/L)</label>
          <input type="number" name="alt" placeholder="e.g., 30">
        </div>
        <div class="input-field">
          <label>Liver Enzymes (AST, U/L)</label>
          <input type="number" name="ast" placeholder="e.g., 25">
        </div>
        <div class="input-field">
          <label>Creatinine (mg/dL)</label>
          <input type="number" step="0.1" name="creatinine" placeholder="e.g., 1.0">
        </div>
      </div>
      <div class="button-group">
        <button type="submit" class="btn btn-danger">Analyze</button>
        <button type="button" class="btn btn-warning" id="clearHealthButton">Clear</button>
      </div>
    </form>
    <div id="healthResults" style="display: none;"></div>
  </div>

  <h1>
    <img src="{{ url_for('static', filename='hi.png') }}" alt="SymptoMed Logo">
    SYMPTOMED HEALTH CARE CENTER
  </h1>

  <div class="form-container">
    <form action="/predict" method="post" id="symptomForm">
      <div class="form-group">
        <label>Select Symptoms :</label>
        <div class="symptom-checkboxes">
          {% for symptom in symptoms_list %}
          <label>
            <input type="checkbox" name="symptoms" value="{{ symptom }}"> {{ symptom.replace('_', ' ').title() }}
          </label>
          {% endfor %}
        </div>
      </div>
      <br>
      <div class="button-group">
        <button type="submit" class="btn btn-danger">Predict</button>
        <button type="button" class="btn btn-warning" id="clearButton">Clear</button>
      </div>
    </form>
  </div>

  {% if predicted_disease %}
  <div class="result-boxes" id="predictionResults" style="display: none;">
    <div class="disease-background">
      <h3>Disease</h3>
      <p><strong>{{ predicted_disease }}</strong></p>
    </div>
    <div class="description-background">
      <h3>Description</h3>
      <p>{{ dis_des }}</p>
    </div>
    <div class="precautions-background">
      <h3>Precautions</h3>
      <ul>
        {% for i in my_precautions %}
        <li>{{ i }}</li>
        {% endfor %}
      </ul>
    </div>
    <div class="diets-background">
      <h3>Diets</h3>
      <ul>
        {% for i in my_diet %}
        <li>{{ i }}</li>
        {% endfor %}
      </ul>
    </div>
    <div class="medications-background">
      <h3>Medications</h3>
      <ul>
        {% for i in medications %}
        <li>{{ i }}</li>
        {% endfor %}
      </ul>
    </div>
    <div class="workouts-background">
      <h3>Workouts</h3>
      <ul>
        {% for i in workout %}
        <li>{{ i }}</li>
        {% endfor %}
      </ul>
    </div>
    <div class="result-box">
      <h3>AI-Suggested Doctors</h3>
      {% if recommended_doctors %}
      <table class="doctor-table" id="aiSuggestedDoctors">
        <thead>
          <tr>
            <th>Doctor Name</th>
            <th>Contact</th>
            <th>Specialist</th>
            <th>Hospital Name</th>
            <th>Place</th>
            <th>Pincode</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          {% for doctor in recommended_doctors %}
          <tr>
            <td>{{ doctor.doctor_name }}</td>
            <td>{{ doctor.contact_number }}</td>
            <td>{{ doctor.specialist }}</td>
            <td>{{ doctor.hospital_name }}</td>
            <td>{{ doctor.place }}</td>
            <td>{{ doctor.pincode }}</td>
            <td><a href="{{ url_for('book_appointment', doctor_id=doctor.doctor_id) }}" class="btn btn-warning">Book Appointment</a></td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <p>No doctors found for this specialty in our database.</p>
      {% endif %}
      <div class="doctor-buttons">
        <button class="btn btn-danger" id="showAiDoctors">View AI-Suggested Doctors</button>
        <button class="btn btn-warning" id="showAllDoctors">View All Doctors</button>
      </div>
    </div>
  </div>
  {% endif %}

  <div class="doctor-list" id="allDoctorsList" style="display: none;">
    <h3>All Available Doctors</h3>
    <table class="doctor-table">
      <thead>
        <tr>
          <th>Doctor Name</th>
          <th>Contact</th>
          <th>Specialist</th>
          <th>Hospital Name</th>
          <th>Place</th>
          <th>Pincode</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        {% for doctor in all_doctors %}
        <tr>
          <td>{{ doctor.doctor_name }}</td>
          <td>{{ doctor.contact_number }}</td>
          <td>{{ doctor.specialist }}</td>
          <td>{{ doctor.hospital_name }}</td>
          <td>{{ doctor.place }}</td>
          <td>{{ doctor.pincode }}</td>
          <td><a href="{{ url_for('book_appointment', doctor_id=doctor.doctor_id) }}" class="btn btn-warning">Book Appointment</a></td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <div class="disease-list">
    <h3>Possible Diseases in Our Dataset</h3>
    <ul>
      {% for disease in all_diseases %}
      <li>{{ disease }}</li>
      {% endfor %}
    </ul>
  </div>
  <br>
  <br>

  <footer class="footer">
    <div class="footer-column">
      <h4>Our Focus</h4>
      <ul>
        <li><a href="#">AI-Powered Diagnosis</a></li>
        <li><a href="#">Health Education</a></li>
        <li><a href="#">Symptom Analysis</a></li>
        <li><a href="#">Preventive Care</a></li>
      </ul>
    </div>
    <div class="footer-column">
      <h4>Policies</h4>
      <ul>
        <li><a href="#">Privacy Policy</a></li>
        <li><a href="#">Data Security</a></li>
        <li><a href="#">Terms of Use</a></li>
        <li><a href="#">User Agreement</a></li>
      </ul>
    </div>
    <div class="footer-column">
      <h4>About Us</h4>
      <ul>
        <li><a href="#">Our Vision</a></li>
        <li><a href="#">Who We Are</a></li>
        <li><a href="#">Our Mission</a></li>
        <li><a href="#">How We Do It</a></li>
        <li><a href="#">Join Our Journey</a></li>
      </ul>
    </div>
    <div class="footer-column">
      <h4>Contact Us</h4>
      <ul>
        <li><a href="#">Support</a></li>
        <li><a href="#">Feedback</a></li>
      </ul>
      <button class="btn">Newsletters</button>
      <button class="btn">Report an Issue</button>
    </div>
    
    <div class="footer-logo">
      <img src="{{ url_for('static', filename='hi.png') }}" alt="SymptoMed Logo">
      <span>SYMPTOMED HEALTH CARE CENTER</span>
      <div class="social-icons">
        <a href="https://youtube.com" target="_blank"><i class="bi bi-youtube"></i></a>
        <a href="https://twitter.com" target="_blank"><i class="bi bi-twitter"></i></a>
        <a href="https://instagram.com" target="_blank"><i class="bi bi-instagram"></i></a>
      </div>
    </div>
  </footer>

  <!-- Chatbot Floating Button and Popup -->
  <button class="chatbot-button" id="chatbotButton">
    <i class="bi bi-chat-dots"></i>
  </button>

  <div class="chatbot-popup" id="chatbotPopup">
    <div class="chatbot-header">
      <span>Chat with SymptoBot</span>
      <button class="chatbot-close" id="chatbotClose">×</button>
    </div>
    <div class="chatbot-body">
      <p>Get instant assistance from our AI-powered chatbot!</p>
      <a href="{{ url_for('chatbot') }}">Start Chat</a>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
<script>
  const symptomForm = document.getElementById('symptomForm');
  const clearButton = document.getElementById('clearButton');
  const predictionResults = document.getElementById('predictionResults');
  const cubeContainer = document.getElementById('cubeContainer');
  const healthForm = document.getElementById('healthForm');
  const healthResults = document.getElementById('healthResults');
  const clearHealthButton = document.getElementById('clearHealthButton');
  const showAiDoctorsButton = document.getElementById('showAiDoctors');
  const showAllDoctorsButton = document.getElementById('showAllDoctors');
  const aiSuggestedDoctors = document.getElementById('aiSuggestedDoctors');
  const allDoctorsList = document.getElementById('allDoctorsList');
  const chatbotButton = document.getElementById('chatbotButton');
  const chatbotPopup = document.getElementById('chatbotPopup');
  const chatbotClose = document.getElementById('chatbotClose');

  // Stop Animation on Symptom Selection
  const checkboxes = document.querySelectorAll('input[name="symptoms"]');
  checkboxes.forEach(checkbox => {
    checkbox.addEventListener('change', () => {
      if (checkbox.checked) {
        document.querySelectorAll('.letter').forEach(letter => {
          letter.classList.add('stopped');
        });
      }
    });
  });

  // Symptom Form Submission with Cube Animation
  symptomForm.addEventListener('submit', (e) => {
    const checkedCount = document.querySelectorAll('input[name="symptoms"]:checked').length;
    if (checkedCount === 0) {
      e.preventDefault();
      alert('Please select at least one symptom.');
    } else {
      e.preventDefault();
      cubeContainer.style.display = 'flex';
      setTimeout(() => {
        cubeContainer.style.display = 'none';
        if (predictionResults) {
          predictionResults.style.display = 'flex';
          if (aiSuggestedDoctors) {
            aiSuggestedDoctors.style.display = 'table';
          }
          if (allDoctorsList) {
            allDoctorsList.style.display = 'none';
          }
        }
        symptomForm.submit();
      }, 2000);
    }
  });

  clearButton.addEventListener('click', () => {
    symptomForm.reset();
    if (predictionResults) {
      predictionResults.style.display = 'none';
    }
    if (allDoctorsList) {
      allDoctorsList.style.display = 'none';
    }
    document.querySelectorAll('.letter').forEach(letter => {
      letter.classList.remove('stopped');
    });
  });

  // Health Parameter Analysis with Age-based Ranges
  const normalRangesByAge = {
    '0-1': { // Infants (0-1 year)
      body_temp: { min: 97.7, max: 100.4 },
      heart_rate: { min: 100, max: 160 },
      resp_rate: { min: 30, max: 60 },
      blood_pressure: { sys_min: 65, sys_max: 100, dia_min: 45, dia_max: 65 },
      spo2: { min: 92, max: 100 }
    },
    '2-12': { // Children (2-12 years)
      body_temp: { min: 97.5, max: 99.5 },
      heart_rate: { min: 70, max: 120 },
      resp_rate: { min: 20, max: 30 },
      blood_pressure: { sys_min: 90, sys_max: 110, dia_min: 55, dia_max: 75 },
      spo2: { min: 95, max: 100 }
    },
    '13-18': { // Teenagers (13-18 years)
      body_temp: { min: 97, max: 99 },
      heart_rate: { min: 60, max: 100 },
      resp_rate: { min: 12, max: 20 },
      blood_pressure: { sys_min: 100, sys_max: 120, dia_min: 60, dia_max: 80 },
      spo2: { min: 95, max: 100 }
    },
    '19-64': { // Adults (19-64 years)
      body_temp: { min: 97, max: 99 },
      heart_rate: { min: 60, max: 100 },
      resp_rate: { min: 12, max: 20 },
      blood_pressure: { sys_min: 90, sys_max: 120, dia_min: 60, dia_max: 80 },
      spo2: { min: 95, max: 100 },
      hemoglobin: { min_m: 13.8, max_m: 17.2, min_w: 12.1, max_w: 15.1 },
      wbc: { min: 4000, max: 11000 },
      rbc: { min_m: 4.7, max_m: 6.1, min_w: 4.2, max_w: 5.4 },
      platelets: { min: 150000, max: 450000 },
      blood_sugar_fasting: { min: 70, max: 99 },
      blood_sugar_post: { min: 0, max: 140 },
      cholesterol: { min: 0, max: 200 },
      triglycerides: { min: 0, max: 150 },
      uric_acid: { min: 3.5, max: 7.2 },
      alt: { min: 7, max: 56 },
      ast: { min: 10, max: 40 },
      creatinine: { min: 0.6, max: 1.3 }
    },
    '65+': { // Seniors (65+ years)
      body_temp: { min: 96.6, max: 98.6 },
      heart_rate: { min: 60, max: 90 },
      resp_rate: { min: 12, max: 20 },
      blood_pressure: { sys_min: 95, sys_max: 140, dia_min: 60, dia_max: 90 },
      spo2: { min: 94, max: 100 }
    }
  };

  const suggestions = {
    body_temp: 'Abnormal temperature may indicate fever or hypothermia.',
    heart_rate: 'Abnormal heart rate may indicate cardiovascular issues.',
    resp_rate: 'Abnormal respiratory rate may indicate respiratory issues.',
    blood_pressure: 'Abnormal blood pressure may indicate hypertension or hypotension.',
    spo2: 'Low oxygen saturation may indicate respiratory distress.',
    hemoglobin: 'Low hemoglobin may indicate anemia; high levels may suggest polycythemia.',
    wbc: 'Abnormal WBC count may indicate infection or immune issues.',
    rbc: 'Abnormal RBC count may indicate anemia or other blood disorders.',
    platelets: 'Abnormal platelet count may indicate clotting issues.',
    blood_sugar_fasting: 'Abnormal fasting sugar may indicate diabetes or hypoglycemia.',
    blood_sugar_post: 'High post-meal sugar may indicate diabetes.',
    cholesterol: 'High cholesterol may indicate cardiovascular risk.',
    triglycerides: 'High triglycerides may indicate cardiovascular risk.',
    uric_acid: 'High uric acid may indicate gout or kidney issues.',
    alt: 'High ALT may indicate liver damage.',
    ast: 'High AST may indicate liver or heart issues.',
    creatinine: 'Abnormal creatinine may indicate kidney dysfunction.'
  };

  function getAgeGroup(age) {
    if (age <= 1) return '0-1';
    if (age <= 12) return '2-12';
    if (age <= 18) return '13-18';
    if (age <= 64) return '19-64';
    return '65+';
  }

  healthForm.addEventListener('submit', (e) => {
    e.preventDefault();
    cubeContainer.style.display = 'flex';
    setTimeout(() => {
      cubeContainer.style.display = 'none';
      const formData = new FormData(healthForm);
      const age = parseInt(formData.get('age'));
      const ageGroup = getAgeGroup(age);
      const ranges = normalRangesByAge[ageGroup];
      let results = '<div class="bar-graph">';
      let suggestionText = '';

      for (let [key, value] of formData.entries()) {
        if (key !== 'age' && value && ranges[key]) {
          let status, barHeight;
          const range = ranges[key];
          let maxRange = range.max || range.sys_max;

          if (key === 'blood_pressure') {
            const [sys, dia] = value.split('/').map(Number);
            status = (sys >= range.sys_min && sys <= range.sys_max && dia >= range.dia_min && dia <= range.dia_max) ? 'normal' : 
                     ((sys < range.sys_min - 10 || sys > range.sys_max + 20 || dia < range.dia_min - 10 || dia > range.dia_max + 20) ? 'critical' : 'slightly-abnormal');
            barHeight = Math.min((sys / 200) * 100, 100);
            value = `${sys}/${dia}`;
          } else {
            value = parseFloat(value);
            maxRange = range.max > 1000 ? range.max / 1000 : range.max;
            status = (value >= range.min && value <= range.max) ? 'normal' : 
                     ((value < range.min - (range.min * 0.1) || value > range.max + (range.max * 0.1)) ? 'critical' : 'slightly-abnormal');
            barHeight = Math.min((value / (maxRange * 1.5)) * 100, 100);
          }

          if (status !== 'normal') {
            suggestionText += `<p><strong>${key.replace('_', ' ').toUpperCase()}:</strong> ${suggestions[key]}</p>`;
          }

          const unit = key === 'blood_pressure' ? 'mmHg' : 
                      key === 'body_temp' ? '°F' :
                      key === 'heart_rate' ? 'bpm' :
                      key === 'resp_rate' ? 'breaths/min' :
                      key === 'spo2' ? '%' :
                      key === 'hemoglobin' ? 'g/dL' :
                      key === 'wbc' ? 'cells/µL' :
                      key === 'rbc' ? 'million cells/µL' :
                      key === 'platelets' ? 'per µL' :
                      key.includes('sugar') ? 'mg/dL' :
                      key === 'cholesterol' ? 'mg/dL' :
                      key === 'triglycerides' ? 'mg/dL' :
                      key === 'uric_acid' ? 'mg/dL' :
                      key === 'alt' || key === 'ast' ? 'U/L' :
                      key === 'creatinine' ? 'mg/dL' : '';

          results += `
            <div class="bar-container">
              <div class="bar-label">${key.replace('_', ' ').toUpperCase()}</div>
              <div class="bar-3d-wrapper">
                <div class="bar-3d ${status}" style="height: ${barHeight}%">
                  <span>${value} ${unit}</span>
                </div>
              </div>
            </div>`;
        }
      }

      results += '</div>';
      if (suggestionText) {
        results += `<div class="suggestions"><h3>Suggestions & Alerts (Age Group: ${ageGroup})</h3>${suggestionText}</div>`;
      }

      healthResults.innerHTML = results;
      healthResults.style.display = 'block';
    }, 2000);
  });

  clearHealthButton.addEventListener('click', () => {
    healthForm.reset();
    healthResults.style.display = 'none';
  });

  // Doctor Buttons Functionality
  if (showAiDoctorsButton) {
    showAiDoctorsButton.addEventListener('click', () => {
      if (aiSuggestedDoctors) {
        aiSuggestedDoctors.style.display = 'table';
      }
      if (allDoctorsList) {
        allDoctorsList.style.display = 'none';
      }
    });
  }

  if (showAllDoctorsButton) {
    showAllDoctorsButton.addEventListener('click', () => {
      if (allDoctorsList) {
        allDoctorsList.style.display = 'block';
      }
      if (aiSuggestedDoctors) {
        aiSuggestedDoctors.style.display = 'none';
      }
    });
  }

  window.addEventListener('load', () => {
    if (predictionResults) {
      cubeContainer.style.display = 'flex';
      setTimeout(() => {
        cubeContainer.style.display = 'none';
        predictionResults.style.display = 'flex';
        if (aiSuggestedDoctors) {
          aiSuggestedDoctors.style.display = 'table';
        }
        if (allDoctorsList) {
          allDoctorsList.style.display = 'none';
        }
      }, 2000);
    }
  });

  // Professional Background Image Crossfade (Disabled since we use video)
  let currentImage = 0;
  const images = [
    "{{ url_for('static', filename='pp3.jpg') }}",
    "{{ url_for('static', filename='pp.jpg') }}",
    "{{ url_for('static', filename='pp1.jpg') }}"
  ];
  const header = document.querySelector('.background-header');

  // Commenting out the crossfade since we use a video
  /*
  setInterval(() => {
    header.classList.add('fade');
    setTimeout(() => {
      currentImage = (currentImage + 1) % images.length;
      header.style.backgroundImage = `url(${images[currentImage]})`;
      header.classList.remove('fade');
    }, 1000);
  }, 20000);
  */

  // Chatbot Button Functionality
  chatbotButton.addEventListener('click', () => {
    chatbotPopup.style.display = chatbotPopup.style.display === 'block' ? 'none' : 'block';
  });

  chatbotClose.addEventListener('click', () => {
    chatbotPopup.style.display = 'none';
  });

  // Close popup when clicking outside
  document.addEventListener('click', (e) => {
    if (!chatbotPopup.contains(e.target) && !chatbotButton.contains(e.target)) {
      chatbotPopup.style.display = 'none';
    }
  });
</script>
{% endblock %}